<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auxiliary tables and the `.pip` environment • pipr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Auxiliary tables and the `.pip` environment">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pipr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/pipr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/get-cp-example.html">Get Country Profiles</a>
    </li>
    <li>
      <a href="../articles/get-gd-example.html">Get Grouped Data Parameters</a>
    </li>
    <li>
      <a href="../articles/pip-env-aux-tables.html">Auxiliary tables and the `.pip` environment</a>
    </li>
    <li>
      <a href="../articles/reproducible-research.html">Reproducible research with PIP</a>
    </li>
    <li>
      <a href="../articles/visualization-examples.html">Visualization examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/worldbank/pipr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Auxiliary tables and the <code>.pip</code>
environment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/worldbank/pipr/blob/DEV/vignettes/articles/pip-env-aux-tables.Rmd" class="external-link"><code>vignettes/articles/pip-env-aux-tables.Rmd</code></a></small>
      <div class="hidden name"><code>pip-env-aux-tables.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://worldbank.github.io/pipr/">pipr</a></span><span class="op">)</span></span></code></pre></div>
<p>The Poverty and Inequality Portal (PIP) not only provides the
estimates to monitor global poverty and country-level inequality, but it
also makes available all the underlying data necessary for such
estimations. These data are called auxiliary tables and you can access
them with the {pipr} package via the function <code><a href="../reference/get_aux.html">get_aux()</a></code>.
You need to know the name of the auxiliary table you need to retrieve.
For that you can use the function <code><a href="../reference/display_aux.html">display_aux()</a></code></p>
<div class="section level2">
<h2 id="display-list-of-auxiliary-tables">Display list of auxiliary tables<a class="anchor" aria-label="anchor" href="#display-list-of-auxiliary-tables"></a>
</h2>
<p>The main objective of <code><a href="../reference/display_aux.html">display_aux()</a></code> is to show the user
all the auxiliary tables available in pip and give them the ability to
download them by just clicking on their names. <a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The idea of this
feature is to simulate the behavior of the complementary PIP Stata
wrapper {<a href="https://github.com/worldbank/pip" class="external-link">pip</a>}.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/display_aux.html">display_aux</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; -- Click on any of the tables below --</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; `aux versions`</span></span>
<span><span class="co">#&gt; `countries`</span></span>
<span><span class="co">#&gt; `country coverage`</span></span>
<span><span class="co">#&gt; `country list`</span></span>
<span><span class="co">#&gt; `cpi`</span></span>
<span><span class="co">#&gt; `decomposition`</span></span>
<span><span class="co">#&gt; `dictionary`</span></span>
<span><span class="co">#&gt; `framework`</span></span>
<span><span class="co">#&gt; `gdp`</span></span>
<span><span class="co">#&gt; `incgrp coverage`</span></span>
<span><span class="co">#&gt; `indicators`</span></span>
<span><span class="co">#&gt; `interpolated means`</span></span>
<span><span class="co">#&gt; `missing data`</span></span>
<span><span class="co">#&gt; `pce`</span></span>
<span><span class="co">#&gt; `pop`</span></span>
<span><span class="co">#&gt; `pop region`</span></span>
<span><span class="co">#&gt; `poverty lines`</span></span>
<span><span class="co">#&gt; `ppp`</span></span>
<span><span class="co">#&gt; `region coverage`</span></span>
<span><span class="co">#&gt; `regions`</span></span>
<span><span class="co">#&gt; `survey means`</span></span></code></pre></div>
<p>When you click on any of the tables names in the console of your R
IDE, {pipr} will store the desired table into the <code>.pip</code>
environment, which is created at build time. That is, each time {pipr}
is loaded or attached. To store the tables in the <code>.pip</code>
environment, <code><a href="../reference/display_aux.html">display_aux()</a></code> makes use of the argument
<code>assign_tb</code> in the <code><a href="../reference/get_aux.html">get_aux()</a></code> function. If
<code>TRUE</code>, <code><a href="../reference/get_aux.html">get_aux()</a></code> assigns the requested
auxiliary table to the <code>.pip</code> environment and returns and
invisible <code>TRUE</code> instead of the table. If <code>FALSE</code>
(the default), it behaves as usual. So, <code><a href="../reference/display_aux.html">display_aux()</a></code> is
just a wrapper around <code><a href="../reference/get_aux.html">get_aux()</a></code> with
<code>assign_tb = TRUE</code>.</p>
</div>
<div class="section level2">
<h2 id="calling-the-tables-in--pip-env-">Calling the tables in <code>.pip</code> env.<a class="anchor" aria-label="anchor" href="#calling-the-tables-in--pip-env-"></a>
</h2>
<p>Since the <code>.pip</code> environment is created at build time
inside {pipr} it is quite tricky to get its contents “by hand.” This why
you need to use function <code>call_aux</code> to call any auxiliary
table available in <code>.pip</code> env. In this way, you have the best
of both words:</p>
<ol style="list-style-type: decimal">
<li>You can download aux tables by only clicking on their names (ala
Stata).</li>
<li>You don’t mess up with the global env</li>
<li>you can call the tables you downloaded with
<code><a href="../reference/call_aux.html">call_aux()</a></code>
</li>
<li>The <code>assign_tb</code> option and <code>call_aux</code> are a
powerful idea for developers who need to keep their environments
clean.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this simulates a `display_aux() call`</span></span>
<span><span class="fu"><a href="../reference/get_aux.html">get_aux</a></span><span class="op">(</span><span class="st">"gdp"</span>, assign_tb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Pruning cache</span></span>
<span><span class="co">#&gt; Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">#&gt;   object 'type_sum.accel' not found</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Auxiliary table <span style="font-weight: bold;">gdp</span> successfully fetched. You can now call it by typing</span></span>
<span><span class="co">#&gt; `pipr::call_aux('gdp')`</span></span>
<span></span>
<span><span class="co"># now you can call it</span></span>
<span><span class="fu"><a href="../reference/call_aux.html">call_aux</a></span><span class="op">(</span><span class="st">"gdp"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10,560 × 4</span></span></span>
<span><span class="co">#&gt;    country_code data_level year   value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABW          national   1977     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABW          national   1978     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABW          national   1979     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABW          national   1980     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ABW          national   1981     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ABW          national   1982     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ABW          national   1983     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ABW          national   1984     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABW          national   1985     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABW          national   1986  <span style="text-decoration: underline;">16</span>112.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10,550 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using--pip-in-development">Using <code>.pip</code> in development<a class="anchor" aria-label="anchor" href="#using--pip-in-development"></a>
</h2>
<p>You can use the <code>.pip</code> environment in development when you
need to interact with PIP auxiliary data in several instances during
your project and need to make sure the data is not affected by the work
in your global environment. <code>.pip</code> environment makes sure
that all its tables remain unchanged and available when needed as long
as {pipr} is not reloaded or a new R session is started</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for developers who may need several tables</span></span>
<span><span class="va">tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cpi"</span>, <span class="st">"ppp"</span>, <span class="st">"pop"</span><span class="op">)</span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">tb</span>, <span class="va">get_aux</span>, assign_tb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Auxiliary table <span style="font-weight: bold;">cpi</span> successfully fetched. You can now call it by typing</span></span>
<span><span class="co">#&gt; `pipr::call_aux('cpi')`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Auxiliary table <span style="font-weight: bold;">ppp</span> successfully fetched. You can now call it by typing</span></span>
<span><span class="co">#&gt; `pipr::call_aux('ppp')`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Auxiliary table <span style="font-weight: bold;">pop</span> successfully fetched. You can now call it by typing</span></span>
<span><span class="co">#&gt; `pipr::call_aux('pop')`</span></span>
<span><span class="fu"><a href="../reference/call_aux.html">call_aux</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">tables available in env pip</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; `gdp`</span></span>
<span><span class="co">#&gt; `ppp`</span></span>
<span><span class="co">#&gt; `cpi`</span></span>
<span><span class="co">#&gt; `pop`</span></span>
<span></span>
<span><span class="fu"><a href="../reference/call_aux.html">call_aux</a></span><span class="op">(</span><span class="st">"pop"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 31,200 × 4</span></span></span>
<span><span class="co">#&gt;    country_code data_level year  value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABW          national   1977  <span style="text-decoration: underline;">61</span>465</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABW          rural      1977  <span style="text-decoration: underline;">30</span>415</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABW          urban      1977  <span style="text-decoration: underline;">31</span>050</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABW          national   1978  <span style="text-decoration: underline;">61</span>738</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ABW          rural      1978  <span style="text-decoration: underline;">30</span>559</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ABW          urban      1978  <span style="text-decoration: underline;">31</span>179</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ABW          national   1979  <span style="text-decoration: underline;">62</span>006</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ABW          rural      1979  <span style="text-decoration: underline;">30</span>701</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABW          urban      1979  <span style="text-decoration: underline;">31</span>305</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABW          national   1980  <span style="text-decoration: underline;">62</span>267</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 31,190 more rows</span></span></span></code></pre></div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>The availability of this feature depends on the IDE you
use, which explained <a href="https://cli.r-lib.org/reference/links.html" class="external-link">here</a>. If you’re
IDE does not support links, {pipr} will only display the list of
available auxiliary tables.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tony Fujs, Aleksander Eilertsen, Ronak Shah, R.Andrés Castañeda, Giorgia Cecchinato.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
